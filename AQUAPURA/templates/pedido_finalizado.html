{% extends "base.html" %}
{% block title %}Pedido Feito - AQUAPURA{% endblock %}

{% block content %}
<div style="max-width:900px; margin:40px auto; text-align:center;">
  <h1>Pedido Feito</h1>
  <p style="opacity:0.9;">Número do pedido: <strong>#{{ pedido.id }}</strong></p>

  <h3 style="margin-top:18px;">Status: {{ pedido.status|replace('_',' ')|title }}</h3>

  {% if pedido.pagamento_metodo == "PIX" %}
    <div style="margin-top:20px;">
      <p>Use o QR Code abaixo para pagar (QR fictício):</p>
      <div style="display:inline-block; background:white; padding:16px; border-radius:12px;">
        <!-- SVG QR fictício -->
        <svg width="180" height="180" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <rect width="100" height="100" fill="#000"></rect>
          <rect x="6" y="6" width="20" height="20" fill="#fff"></rect>
          <rect x="74" y="6" width="20" height="20" fill="#fff"></rect>
          <rect x="6" y="74" width="20" height="20" fill="#fff"></rect>
          <rect x="30" y="30" width="10" height="10" fill="#fff"></rect>
          <rect x="45" y="30" width="10" height="10" fill="#fff"></rect>
          <rect x="30" y="45" width="10" height="10" fill="#fff"></rect>
          <rect x="45" y="45" width="10" height="10" fill="#fff"></rect>
        </svg>
      </div>

      <p style="margin-top:12px; font-size:0.9rem; color:var(--texto); opacity:0.8;">
        Aguardando pagamento — depois que o pagamento for confirmado, o administrador poderá atualizar o pedido.
      </p>
    </div>
  {% else %}
    <p style="margin-top:20px;">Recebemos sua solicitação de pagamento via cartão. Aguardando confirmação.</p>
  {% endif %}

  <div style="margin-top:28px; text-align:left; display:block; max-width:720px; margin-left:auto; margin-right:auto;">
    <h4>Itens do pedido</h4>
    <div style="background:var(--card-bg); border:1px solid var(--border); padding:12px; border-radius:12px;">
      {% for it in itens %}
        <div style="display:flex; gap:12px; align-items:center; padding:8px 0; border-bottom:1px solid var(--border);">
          <img src="{{ it.imagem_principal }}" alt="{{ it.nome }}" style="width:70px; height:70px; object-fit:cover; border-radius:8px;">
          <div style="flex:1;">
            <div style="font-weight:700;">{{ it.nome }}</div>
            <div style="font-size:0.9rem; color:var(--texto); opacity:0.8;">
              Qtd: {{ it.quantidade }} • R$ {{ "%.2f"|format(it.valor) }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
