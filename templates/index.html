{% extends "base.html" %}
{% block title %}Página Inicial - AquaPura{% endblock %}

{% block content %}

<!-- ===== Carrossel de Promoções ===== -->
<section class="promocoes">
    <div class="carousel">
        <div class="slides">
            <div class="slide active">
                <img src="{{ url_for('static', filename='img/banner1.png') }}" alt="Promoção 1">
            </div>
            <div class="slide">
                <img src="{{ url_for('static', filename='img/promo3.png') }}" alt="Promoção 2">
            </div>
            <div class="slide">
                <img src="{{ url_for('static', filename='img/banner2.png') }}" alt="Promoção 3">
            </div>
        </div>

        <button class="prev">&#10094;</button>
        <button class="next">&#10095;</button>

        <div class="dots">
            <span class="dot active"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
    </div>
</section>



<!-- ===== Produtos Recentes ===== -->
<section class="produtos">
    <h2>Lançamentos</h2>
    <p>Produtos recém-adicionados ao catálogo AquaPura.</p>

    <div class="grid-produtos">
        {% for p in produtos %}
        <!-- ✅ Adicionar classe 'esgotado' se estoque for 0 -->
        <div class="produto {% if p.estoque == 0 %}esgotado{% endif %}">
            {% if p.estoque > 0 %}
            <a href="/produto/{{ p.id }}">
                <img src="{{ p.imagem_principal }}" alt="{{ p.nome }}">
            </a>
            {% else %}
            <div style="position: relative;">
                <img src="{{ p.imagem_principal }}" alt="{{ p.nome }}">
                <div class="badge-esgotado-index">Esgotado</div>
            </div>
            {% endif %}

            <h3>{{ p.nome }}</h3>
            <p>R$ {{ "%.2f"|format(p.preco) }}</p>

            <!-- ✅ BOTÃO DINÂMICO -->
            {% if p.estoque > 0 %}
            <a href="/produto/{{ p.id }}" style="display: block; width: 100%;">
                <button style="width: 100%; margin: 0; padding: 10px 20px;">Ver detalhes</button>
            </a>
            {% else %}
            <button class="btn-esgotado-index" disabled style="background: #ef4444 !important; border: 2px solid #dc2626 !important; margin: 0; padding: 10px 20px; width: 100%;">Esgotado</button>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</section>

<!-- ===== Categorias ===== -->
<section class="categorias">
    <a href="/garrafas" class="categoria">
        <img src="{{ url_for('static', filename='img/garrafas.png') }}" alt="Garrafas">
        <h3>Garrafas</h3>
    </a>

    <a href="/copos" class="categoria">
        <img src="{{ url_for('static', filename='img/copos.png') }}" alt="Copos">
        <h3>Copos</h3>
    </a>

    <a href="/acessorios" class="categoria">
        <img src="{{ url_for('static', filename='img/acessorios.png') }}" alt="Acessórios">
        <h3>Acessórios</h3>
    </a>
</section>

{% endblock %}